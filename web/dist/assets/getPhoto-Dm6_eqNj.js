import{i as m,d as B,g as $,o as c,c as i,a as s,b as l,e as p,j as f,z as M,k as z,l as U,m as N,p as L,F as x,n as P,r as F,q as j,s as G,w as H,t as W,x as J,E as q,y as K,v as Q,A as X}from"./index-BeyL29IB.js";import{p as Y,A as I,_ as R,g as Z,l as ee,d as te}from"./_plugin-vue_export-helper-D5b_Lhy7.js";const D=m([]),V=m([]),ae={class:"savePhotoContainer"},se={class:"plusContainer"},oe=["src"],le={class:"el-upload-list__item-actions"},ne=["onClick"],ce=["onClick"],ie=["onClick"],ue=["src"],de={class:"show-photo"},re=["src"],_e=B({__name:"savePhoto",setup(O,{emit:e}){const v=m(""),d=m(!1),g=m(!1),C=m("params.png"),h=e,T=n=>{console.log(n)},b=n=>{v.value=n.url,d.value=!0},E=n=>{console.log(n)},k=n=>{console.log(n),C.value=n.fileName;const w={name:n.fileName,path:n.path,url:n.url,searchText:n.fileName};Y(`api/${I.SET_PHOTO}`,w,t=>{if(t.status=="success"){const a={url:C.value,id:t.id};h("path",a)}})},A=n=>{console.log(n)};return(n,w)=>{const t=$("el-icon"),a=$("el-upload"),r=$("el-dialog");return c(),i("div",ae,[s("div",se,[l(a,{action:"/api/SAVE/PHOTO","show-file-list":!1,"on-success":k,"before-upload":A,"auto-upload":!0},{file:p(({file:o})=>[s("div",null,[s("img",{class:"el-upload-list__item-thumbnail",src:o.url,alt:""},null,8,oe),s("span",le,[s("span",{class:"el-upload-list__item-preview",onClick:y=>b(o)},[l(t,null,{default:p(()=>[l(f(M))]),_:1})],8,ne),g.value?U("",!0):(c(),i("span",{key:0,class:"el-upload-list__item-delete",onClick:y=>E(o)},[l(t,null,{default:p(()=>[l(f(z))]),_:1})],8,ce)),g.value?U("",!0):(c(),i("span",{key:1,class:"el-upload-list__item-delete",onClick:y=>T(o)},[l(t,null,{default:p(()=>[l(f(N))]),_:1})],8,ie))])])]),default:p(()=>[l(t,{size:30},{default:p(()=>[l(f(L))]),_:1})]),_:1}),l(r,{modelValue:d.value,"onUpdate:modelValue":w[0]||(w[0]=o=>d.value=o)},{default:p(()=>[s("img",{"w-full":"",src:v.value,alt:"Preview Image"},null,8,ue)]),_:1},8,["modelValue"])]),s("div",de,[(c(!0),i(x,null,P(f(V),(o,y)=>(c(),i("img",{key:y,class:"images",src:`photo/${o.name}`,alt:""},null,8,re))),128))])])}}}),he=R(_e,[["__scopeId","data-v-2f04766d"]]),pe={class:"revise"},me={class:"input"},ve={style:{"margin-left":"70px"}},fe={class:"showContainer"},ge={class:"photo1"},ke=["src","onDblclick"],xe={class:"photo1"},$e=["src","onClick"],Ce={class:"photo1"},Te=["src","onClick"],we={class:"photo1"},ye=["src","onClick"],Pe={class:"photo1"},be=["src","onClick"],Ee=B({__name:"showPhoto",props:{id:{},url:{}},setup(O){const e=F({reviseStatus:!1,state:1,data1:[],data2:[],data3:[],data4:[],data5:[],searchText:"",photoIndex:0,photoArr:[]}),v=O;j(()=>{d()}),G(()=>v.url,t=>{console.log(t);const a=v.id;g(t,a,t),d()});function d(){e.data1=[],e.data2=[],e.data3=[],e.data4=[],e.data5=[],Z(`api/${I.GET_PHOTO}`,t=>{const{list:a}=t;D.value=a,a.forEach(r=>{g(r.name,r.id,r.searchText)})})}function g(t,a,r){const o={id:a,url:`photo/${t}`,status:e.state,searchText:r};switch(e.state){case 1:e.data1.push(o),e.state+=1;break;case 2:e.data2.push(o),e.state+=1;break;case 3:e.data3.push(o),e.state+=1;break;case 4:e.data4.push(o),e.state+=1;break;case 5:e.data5.push(o),e.state=1;break}}function C(t){k(t,e.data1)}function h(t){k(t,e.data2)}function T(t){k(t,e.data3)}function b(t){k(t,e.data4)}function E(t){k(t,e.data5)}const k=(t,a)=>{e.reviseStatus=!0,e.photoIndex=t,e.photoArr=a,e.searchText=a[t].searchText};function A(){if(e.searchText==""){q({message:"输入搜索参数",type:"warning"});return}const t={id:e.photoArr[e.photoIndex].id,searchText:e.searchText};ee(`api/${I.REVISE}`,t,a=>{console.log(a),d()}),e.reviseStatus=!1}function n(){K.confirm("是否删除图片?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w(e.photoIndex,e.photoArr)}).catch(()=>{q({type:"info",message:"取消删除"})}),e.reviseStatus=!1}function w(t,a){const r={id:a[t].id};te(`api/${I.DELETE_PHOTO}`,r,o=>{console.log(o),d()})}return(t,a)=>{const r=$("el-input"),o=$("el-button"),y=$("el-affix");return c(),i(x,null,[l(y,{offset:500},{default:p(()=>[H(s("div",pe,[s("div",me,[l(r,{type:"text",modelValue:e.searchText,"onUpdate:modelValue":a[0]||(a[0]=_=>e.searchText=_),style:{width:"150px"}},null,8,["modelValue"])]),s("div",ve,[l(o,{type:"danger",icon:f(J),style:{width:"20px"},onClick:A},null,8,["icon"]),l(o,{type:"warning",icon:f(N),style:{width:"20px"},onClick:n},null,8,["icon"])])],512),[[W,e.reviseStatus]])]),_:1}),s("div",fe,[s("div",ge,[(c(!0),i(x,null,P(e.data1,(_,u)=>(c(),i("img",{key:u,src:_.url,alt:"",class:"image",onDblclick:S=>C(u)},null,40,ke))),128))]),s("div",xe,[(c(!0),i(x,null,P(e.data2,(_,u)=>(c(),i("img",{key:u,src:_.url,alt:"",class:"image",onClick:S=>h(u)},null,8,$e))),128))]),s("div",Ce,[(c(!0),i(x,null,P(e.data3,(_,u)=>(c(),i("img",{key:u,src:_.url,alt:"",class:"image",onClick:S=>T(u)},null,8,Te))),128))]),s("div",we,[(c(!0),i(x,null,P(e.data4,(_,u)=>(c(),i("img",{key:u,src:_.url,alt:"",class:"image",onClick:S=>b(u)},null,8,ye))),128))]),s("div",Pe,[(c(!0),i(x,null,P(e.data5,(_,u)=>(c(),i("img",{key:u,src:_.url,alt:"",class:"image",onClick:S=>E(u)},null,8,be))),128))])])],64)}}}),Se=R(Ee,[["__scopeId","data-v-6b1fd68b"]]),Ie={class:"container-search"},Ve={class:"searchContainer"},Oe=B({__name:"getPhoto",setup(O){const e=m(""),v=m(""),d=m(0);function g(){console.log(D.value),V.value=[],D.value.forEach(h=>{h.searchText.includes(e.value)&&V.value.push(h)}),console.log(V.value.length)}function C(h){v.value=h.url,d.value=h.id}return(h,T)=>{const b=$("el-icon");return c(),i("div",Ie,[s("div",Ve,[H(s("input",{placeholder:"Enter a name for the image",class:"input",name:"email",type:"text",required:"","onUpdate:modelValue":T[0]||(T[0]=E=>e.value=E)},null,512),[[Q,e.value]]),s("button",{class:"button",onClick:g},[l(b,null,{default:p(()=>[l(f(X))]),_:1})])]),s("div",null,[l(he,{onPath:C})]),l(Se,{url:v.value,id:d.value},null,8,["url","id"])])}}}),Be=R(Oe,[["__scopeId","data-v-3f4cca7a"]]);export{Be as default};
